<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<title>joshua poehls | silent thought</title>

<link rel="canonical" href="http://joshua.poehls.me/">
<link href="/feed.xml" rel="alternate" type="application/atom+xml" title="joshua poehls | silent thought">
<meta name="generator" content="Hugo 0.14" />


<link rel="stylesheet" href="/normalize.css">
<link rel="stylesheet" href="/skeleton.css">
<link rel="stylesheet" href="/styles.css">


<link href='http://fonts.googleapis.com/css?family=Merriweather' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>


<meta name="viewport" content="width=device-width, initial-scale=1">


<link rel="apple-touch-icon" href="/touch-icon-iphone.png" /> 
<link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png" /> 
<link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png" />
<link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png" />
<link rel="apple-touch-icon" sizes="180x180" href="/touch-icon-iphone-retinahd.png">

</head>
<body lang="en-US">

<header id="masthead">
	<div class="container">
		<div class="row">
			<div class="twelve columns">
				<h1>
					<small>I am</small>
					<a href="/">Joshua Poehls</a>.
					<small class="contact-link"><a href="/contact">Say hello</a></small>
					<small class="archives-link"><a href="/archives">Archives</a></small>
					<span class="aka">(not so) silent thoughts</span>
				</h1>
			</div>
		</div>
	</div>
</header>



<div class="container">

	<section id="posts">
	
	<div class="row">
<div class="twelve columns">

<article class="post">
    <header>
        <h1>
            
            <a href="/1/coding-color-schemes---visual-studio-2005">Coding Color Schemes - Visual Studio 2005</a>
            
        </h1>
        <p>
            <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" pubdate="pubdate">Mon, Jan 1, 0001</time>
            <span class="symbol">&#8226;</span>
            <a class="permalink" title="Permalink" href="/1/coding-color-schemes---visual-studio-2005">
                <span class="noprint symbol">&#8734;</span>
                <span class="printonly">http://joshua.poehls.me/1/coding-color-schemes---visual-studio-2005</span>
            </a>
        </p>
    </header>

    <p>As promised here is my color scheme for Visual Studio.</p>

<p><a rel="screenshots" class="lightbox img" href="http://2.bp.blogspot.com/_uTRG_A-YdZY/RxTUAixBbyI/AAAAAAAABDM/tp8OS4y3vmE/s1600-h/1.png">
    <img src="http://2.bp.blogspot.com/_uTRG_A-YdZY/RxTUAixBbyI/AAAAAAAABDM/tp8OS4y3vmE/s400/1.png" /></a>
<a rel="screenshots" class="lightbox img" href="http://2.bp.blogspot.com/_uTRG_A-YdZY/RxTUAixBbzI/AAAAAAAABDU/vgquenRv5IM/s1600-h/2.png">
    <img src="http://2.bp.blogspot.com/_uTRG_A-YdZY/RxTUAixBbzI/AAAAAAAABDU/vgquenRv5IM/s400/2.png" /></a>
<a rel="screenshots" class="lightbox img" href="http://3.bp.blogspot.com/_uTRG_A-YdZY/RxTUAyxBb0I/AAAAAAAABDc/TxUbcQ3Y82k/s1600-h/3.png">
    <img src="http://3.bp.blogspot.com/_uTRG_A-YdZY/RxTUAyxBb0I/AAAAAAAABDc/TxUbcQ3Y82k/s400/3.png" /></a>
<a rel="screenshots" class="lightbox img" href="http://4.bp.blogspot.com/_uTRG_A-YdZY/RxTUBCxBb1I/AAAAAAAABDk/WpFdsJBPNqA/s1600-h/4.png">
    <img src="http://4.bp.blogspot.com/_uTRG_A-YdZY/RxTUBCxBb1I/AAAAAAAABDk/WpFdsJBPNqA/s400/4.png" /></a></p>

<ul>
<li>Changed font to <a href="http://www.webdevkungfu.com/textmate-envy-aka-monaco-font-for-windows">Monaco</a>
in Environment|Fonts and Colors under &ldquo;Text Editor&rdquo;</li>
<li>Plain Text, HTML Attr. Value, Identifier, XML Attr. Value, XML Text - <strong>White</strong>
<span style="background-color: #000; padding: 0.5em; color:#fff;">(White)</span></li>
<li>Comment, CSS Comment, HTML Comment, XML Comment, XML Doc Comment - <strong>(R,G,B) 74,255,74</strong>
<span style="background-color: #000; padding: 0.5em; color:#4AFF4A;">(Greenish)</span></li>
<li>CSS Selector, HTML Element Name, HTML Operator, HTML Tag Delimiter, Keyword,
XML Delimiter, XML Keyword, XML Tag Delimiter - <strong>(R,G,B) 177,100,255</strong> <span style="background-color: #000; padding: 0.5em; color:#B164FF;">(Purplish)</span></li>
<li>CSS Property Name, HTML Attr. Name, Number, String, String (C# @ Verbatim), XML Attr.,
XML Attr. Name, XML Attr. Quotes - <strong>(R,G,B) 255,108,108</strong> <span style="background-color: #000; padding: 0.5em; color:#FF6C6C;">(Redish)</span></li>
<li>CSS Keyword, CSS Property Value, CSS String Value, Operator, User Types - <strong>(R,G,B) 43,145,175</strong>
<span style="background-color: #000; padding: 0.5em; color:#2B91AF;">(Bluish)</span></li>
<li>HTML Entity, Preprocessor Keyword, XML Element Name, XML Name - <strong>(R,G,B) 255,255,117</strong>
<span style="background-color: #000; padding: 0.5em; color:#FFFF75;">(Yellowish)</span></li>
<li>Line Numbers, XML CDATA Section, XML Doc Attr., XML Doc Tag, XML Processing Instruction -
<strong>(R,G,B) 128,128,128</strong> <span style="background-color: #000; padding: 0.5em; color:#808080;">(Gray)</span></li>
</ul>


</article>

<div class="fin symbol">&#10687;</div>

</div>
</div>
	
	<div class="row">
<div class="twelve columns">

<article class="post">
    <header>
        <h1>
            
            <a href="/1/dotnetmigrations-demo">DotNetMigrations Demo</a>
            
        </h1>
        <p>
            <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" pubdate="pubdate">Mon, Jan 1, 0001</time>
            <span class="symbol">&#8226;</span>
            <a class="permalink" title="Permalink" href="/1/dotnetmigrations-demo">
                <span class="noprint symbol">&#8734;</span>
                <span class="printonly">http://joshua.poehls.me/1/dotnetmigrations-demo</span>
            </a>
        </p>
    </header>

    <style type="text/css"><br /><br /><br /><br /><br />a img { margin-left: -40px; }</style>  <p>Here’s my attempt at demonstrating how great migrations are through a simple Hello World demo. Enjoy.</p>  <p>I’m going to show you how migrations can be used with a Hello World app that uses a database.</p>  <p>Oh yeah, if you haven't already, you'll want to read my first post about .NET Migrations (a.k.a. <a href="http://zduck.blogspot.com/2008/04/ruby-on-rails-migrations-for-net.html">Ruby on Rails Migrations for .NET</a>).</p>  <h2>The Demo</h2>  <ol>   <li>I’ve created the directory structure for my app. 
<a href="http://lh5.ggpht.com/jpoehls/SBHeNPhLgCI/AAAAAAAABpM/pwW1phf49AQ/1%5B7%5D.png"><img height="159" alt="1" src="http://lh5.ggpht.com/jpoehls/SBHcsPhLflI/AAAAAAAABpU/MqamNtJBlws/1_thumb%5B5%5D.png" width="400" /></a>      
</li>    <li>In the ‘db’ folder I’ve placed the DotNetMigrations executable along with a config file to store some connection strings in. Note that this config file is not required, you can always pass in your connection string to db.exe as an argument. The config file just means less typing for me. 
<a href="http://lh6.ggpht.com/jpoehls/SBHcsfhLfmI/AAAAAAAABpY/tHoHVArOl_Q/2%5B8%5D.png"><img height="110" alt="2" src="http://lh4.ggpht.com/jpoehls/SBHcs_hLfnI/AAAAAAAABpc/EBy_pUEuT_M/2_thumb%5B6%5D.png" width="400" /></a>      
</li>    <li>My config file has 2 connection strings, one for DEV and one for TEST: 
<a href="http://lh6.ggpht.com/jpoehls/SBHctfhLfoI/AAAAAAAABpg/vjQhiQkJBgY/3%5B7%5D.png"><img height="130" alt="3" src="http://lh3.ggpht.com/jpoehls/SBHctvhLfpI/AAAAAAAABpk/4Tv9Ou-Valc/3_thumb%5B5%5D.png" width="400" /></a>      
</li>    <li>Notice you have to already have created your database on the server. Creating databases it outside the scope of migrations. Migrations only care about the schema (tables, sprocs, functions, users, etc) <i>inside</i> an existing database.      
</li>    <li>My Hello World app needs a new “Languages” table to hold every country’s language. Lets create a migration to make this change. Start by running db.exe from the command line, notice how it will give you examples for how to call each available command: 
<a href="http://lh5.ggpht.com/jpoehls/SBHcuPhLfqI/AAAAAAAABpo/K6-CjFwjGfU/4%5B5%5D.png"><img height="242" alt="4" src="http://lh6.ggpht.com/jpoehls/SBHcufhLfrI/AAAAAAAABps/AZ7jSeMcZ5M/4_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>We want to create a new migration so we’re interested in the ‘generate’ command. Let’s execute it:     
<b>db generate create_languages_table 
<a href="http://lh3.ggpht.com/jpoehls/SBHcuvhLfsI/AAAAAAAABpw/92kJ6IA_Tq0/5%5B5%5D.png"><img height="48" alt="5" src="http://lh4.ggpht.com/jpoehls/SBHcu_hLftI/AAAAAAAABp0/uXlqcXn9B4I/5_thumb%5B3%5D.png" width="400" /></a>        
</b></li>    <li>Great! It says it created my migration. Let’s see where it put it: 
<a href="http://lh5.ggpht.com/jpoehls/SBHcvPhLfuI/AAAAAAAABp4/Dx5O71QaUnE/6%5B6%5D.png"><img height="105" alt="6" src="http://lh3.ggpht.com/jpoehls/SBHcvvhLfvI/AAAAAAAABp8/FK1ZpaEJJlU/6_thumb%5B4%5D.png" width="400" /></a>      
</li>    <li>I can see here it created a /migrate folder and put my migration in a .sql file under it. Notice how it automatically gave the file a sequential number. This is how DotNetMigrations knows which order to apply your migrations in when you run them.     
</li>    <li>Ok. So the migration it generated is just a blank template. Let’s open it up and see what we get: 
<a href="http://lh4.ggpht.com/jpoehls/SBHcv_hLfwI/AAAAAAAABqA/MGfMzJFDfWA/7%5B5%5D.png"><img height="278" alt="7" src="http://lh6.ggpht.com/jpoehls/SBHcwfhLfxI/AAAAAAAABqE/QyONM3pACQM/7_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>This is the template for our migration. Every migration has a SETUP step and a TEARDOWN step. The idea here is that for every change (migration) we make to the database, we need a way to undo, or roll it back, that’s the Teardown.     
</li>    <li>Now let’s add our change. Remember, this really is just a SQL script. You can add any kind of T-SQL here that you want: 
<a href="http://lh3.ggpht.com/jpoehls/SBHcwvhLfyI/AAAAAAAABqI/q8V4WmdwVNc/8%5B5%5D.png"><img height="407" alt="8" src="http://lh5.ggpht.com/jpoehls/SBHcxPhLfzI/AAAAAAAABqM/LyvmF8OZeMY/8_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>Kool. So here we’ve said we want to create a new Languages table and insert some rows of data. We’ve also told our Teardown how to undo this Setup by dropping the table.     
</li>    <li>A quick way to test this script would be to run it in SQL Studio against your database. If it works correctly you should see no change whatsoever in your database. Think about it, your SETUP will run, make the change, then your TEARDOWN will run and undo that change. The result should be the same as what you started with.     
</li>    <li>Now let’s use DotNetMigrations to migrate our DEV database to this migration version 1 we’ve created. This is as easy as executing <b>db migrate dev</b>. Since we didn’t specify a version to migrate to, it is assumed we want to migrate to the most recent version available (in this case version 1). Remember, <b>dev</b>, is what we named our connection string in the config file that hits the DEV database. 
<a href="http://lh6.ggpht.com/jpoehls/SBHcxfhLf0I/AAAAAAAABqQ/fDb7T16sJbA/9%5B5%5D.png"><img height="80" alt="9" src="http://lh3.ggpht.com/jpoehls/SBHcxvhLf1I/AAAAAAAABqU/1JyhR_XOwh0/9_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>Sweet! So we see here that before the database was migrated it was at version 0 and after the migration it is at version 1. Now if we look at our database we see we have not only the Languages table we told it to add, but we also have a new <b>schema_info</b> table… 
<a href="http://lh5.ggpht.com/jpoehls/SBHcyPhLf2I/AAAAAAAABqY/viKScYBhenw/10%5B6%5D.png"><img height="213" alt="10" src="http://lh6.ggpht.com/jpoehls/SBHcyfhLf3I/AAAAAAAABqc/VRUb1DCE6Ho/10_thumb%5B4%5D.png" width="400" /></a>      
</li>    <li>This table is created and maintained automagically by DotNetMigrations. It only has 1 row and 1 column, “version”. And DotNetMigrations uses this to track what version of the schema the database contains. This is how it knows which migration scripts need to be ran to migrate the database to and from any version specified.     
</li>    <li>That was simple enough. So now I discover that that Languages table should also have a column to store the Difficulty of the language. Lets create a new migration for that: 
<a href="http://lh4.ggpht.com/jpoehls/SBHcy_hLf4I/AAAAAAAABqg/YYcc1iWF5-k/11%5B6%5D.png"><img height="291" alt="11" src="http://lh5.ggpht.com/jpoehls/SBHczPhLf5I/AAAAAAAABqk/p117W-OH580/11_thumb%5B4%5D.png" width="400" /></a>      
</li>    <li>Now let’s migrate our database: 
<a href="http://lh6.ggpht.com/jpoehls/SBHczfhLf6I/AAAAAAAABqo/IWz9QFAXNWQ/12%5B5%5D.png"><img height="90" alt="12" src="http://lh4.ggpht.com/jpoehls/SBHcz_hLf7I/AAAAAAAABqs/DENcCysLSKw/12_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>Awesome. That was easy. But wait, now I need to rollback to version 1 for some reason… 
<a href="http://lh5.ggpht.com/jpoehls/SBHc0PhLf8I/AAAAAAAABqw/A8QZKHhsxdc/13%5B5%5D.png"><img height="124" alt="13" src="http://lh3.ggpht.com/jpoehls/SBHc0vhLf9I/AAAAAAAABq0/OJNocRcs8ws/13_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>It’s just that easy. We can roll all the way back to version 0 if we want: <b>db migrate 0 dev. </b>This will perform the teardown script for version 1, which brings us back to version 0.      
</li>    <li>Then migrate all the way up to the latest version (2): <b>db migrate dev</b>. This executes the setup scripts for versions 1 and 2 in order.      
</li>    <li>You can see the current version your database’s schema at anytime by running the <strong>version</strong> command: 
<a href="http://lh4.ggpht.com/jpoehls/SBHc0_hLf-I/AAAAAAAABq4/-T9kDFt5dI4/14%5B5%5D.png"><img height="148" alt="14" src="http://lh5.ggpht.com/jpoehls/SBHc1PhLf_I/AAAAAAAABq8/C6qHOl3tSvA/14_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>This tells you both the current version of your database’s schema as well as the latest migration script you have. We can see here that my DEV database is at version 1 but I have a migration version 2 available to run.     
</li>    <li>One last thing, my Hello World app is ready to go to QA. Let’s bring the TEST database up to speed: 
<a href="http://lh3.ggpht.com/jpoehls/SBHc1vhLgAI/AAAAAAAABrA/ZTruHjg5OaY/15%5B5%5D.png"><img height="82" alt="15" src="http://lh4.ggpht.com/jpoehls/SBHc1_hLgBI/AAAAAAAABrE/oG57UOwxXRM/15_thumb%5B3%5D.png" width="400" /></a>      
</li>    <li>Beautiful. </li> </ol>  <h2>Footnotes</h2>  <p>Ok. So you’ve seen now how to generate new migrations and run them against your database. You’ve also seen how to migrate your database backwards and forwards using those scripts. Here are some misc notes I didn’t work in:</p>  <ul>   <li>The db.exe executable and config should be stored in source control right along with the /migrate folder and the migration scripts. Think of this exe as more of a script than an application. Its only job is to serve the migration scripts for this specific project.     
</li>    <li>When you tag (or Label in SourceSafe and TFS) your build, you will include all migration scripts that build uses. This means for any version of your application, you know <i>exactly</i> which version of the schema you need to migrate to. Since all migrations are incremental, building on the previous ones, this means you will always be able to create an instance of your database schema to match every build of your application.      
</li>    <li>I didn’t demo it here, but DotNetMigrations does everything it can to protect your existing schema. When you run the migrate command, all setup/teardown scripts are wrapped in a transaction and executed as one block. If any part of any of the scripts fail, then the whole transaction will be rolled back and <i>no change</i> will be made to your database. Of course we all test our scripts thoroughly right?      
</li>    <li>You don’t have to under-score the names of your migrations, you could just as easily use CamelCasing, but let’s stay away from spaces, please. </li> </ul>  <h2>TIPS &amp; TRICKS for using migrations on an existing database</h2>  <h2></h2>  <ul>   <li>So you have an existing database and want to start using migrations? Easy. Generate a migration script and call it <b>initial_setup</b> or whatever makes sense.      
</li>    <li>Use SQL Studio to generate the CREATE scripts for all objects in your database. Put those in the SETUP step of the migration.     
</li>    <li>Do the same to generate the DROP scripts and put those in the TEARDOWN.     
</li>    <li>TEST, TEST, TEST! Create a new, empty database and run your migration SETUP and TEARDOWN scripts against it. This is very important when creating the migration script for an existing database since all your tables, constraints, indexes, stored procs, etc. probably need to be created (and dropped) in a specific order so that no dependencies are broken.     
</li>    <li>Now that you have your <b>001_initial_setup</b> migration you can start using migrations for all your incremental database changes. Go for it! </li> </ul>  

</article>

<div class="fin symbol">&#10687;</div>

</div>
</div>
	
	<div class="row">
<div class="twelve columns">

<article class="post">
    <header>
        <h1>
            
            <a href="/1/corporate-comic">Corporate Comic</a>
            
        </h1>
        <p>
            <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" pubdate="pubdate">Mon, Jan 1, 0001</time>
            <span class="symbol">&#8226;</span>
            <a class="permalink" title="Permalink" href="/1/corporate-comic">
                <span class="noprint symbol">&#8734;</span>
                <span class="printonly">http://joshua.poehls.me/1/corporate-comic</span>
            </a>
        </p>
    </header>

    <p>This is my first comic strip, inspired by a random spurt of creativity.
I can&rsquo;t take all the credit though. The fantastic &lsquo;lettering&rsquo; was done
by a very good friend ;)</p>

<p><a class="lightbox img" title="Comic" href="{{site.url}}/assets/forposts/comic/JK-comic-1.jpg">
    <img src="{{site.url}}/assets/forposts/comic/JK-comic-1-small.jpg" alt="comic" />
</a></p>

<p>If you can&rsquo;t make it out, here&rsquo;s a blow-by-blow description&hellip;</p>

<p>The comic depicts an inspector looking at a tank that is structurally insecure.
During his inspection, the tank falls on him and begins to roll down the hill,
snowballing with the inspector on it.</p>


</article>

<div class="fin symbol">&#10687;</div>

</div>
</div>
	
	<div class="row">
<div class="twelve columns">

<article class="post">
    <header>
        <h1>
            
            <a href="/1/ruby-on-rails-migrations-for-.net">Ruby on Rails Migrations for .NET</a>
            
        </h1>
        <p>
            <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" pubdate="pubdate">Mon, Jan 1, 0001</time>
            <span class="symbol">&#8226;</span>
            <a class="permalink" title="Permalink" href="/1/ruby-on-rails-migrations-for-.net">
                <span class="noprint symbol">&#8734;</span>
                <span class="printonly">http://joshua.poehls.me/1/ruby-on-rails-migrations-for-.net</span>
            </a>
        </p>
    </header>

    <p>I&rsquo;ve been looking a lot at Ruby on Rails lately, and one of the things
that really stands out to me are the
<a href="http://wiki.rubyonrails.org/rails/pages/UnderstandingMigrations">migrations</a>.
Migrations is the Rails way of defining your database schema in such a way that it is easy to:</p>

<ul>
<li>put into source control</li>
<li>shared between developers</li>
<li>rollback or upgrade to any version of the schema from any version</li>
</ul>

<p>Plenty of info is available about migrations on at the Ruby on Rails website
so I won&rsquo;t duplicate that here. I do recommend reading the basics on
<a href="http://wiki.rubyonrails.org/rails/pages/UnderstandingMigrations">how RoR migrations work</a>
before continuing.</p>

<p>Suffice to say I wanted something like this to use with my .NET applications pretty bad.
I searched around and couldn&rsquo;t find anything like this for .NET (without
jumping into some full blown OR/M) so I made one myself.</p>

<p>I call it &ldquo;DotNetMigrations&rdquo; and it&rsquo;s as close to the RoR version of migrations
as I could make it. The biggest difference is that your migration script is real
T-SQL instead of Ruby. This is actually a big plus in the .NET/SQL Server world
since you can just open your script in SQL Management Studio to test it, and
copy/paste the scripts Studio generates for you to create your migration scripts.</p>

<p>Here&rsquo;s a screenshot from the app with basic usage examples:</p>

<p><a class="lightbox img" href="http://1.bp.blogspot.com/_uTRG_A-YdZY/SBEDtvhLfFI/AAAAAAAABf4/LjHlzRMz8N8/s1600-h/DotNetMigrations_usage.png">
    <img src="http://1.bp.blogspot.com/_uTRG_A-YdZY/SBEDtvhLfFI/AAAAAAAABf4/LjHlzRMz8N8/s400/DotNetMigrations_usage.png" /></a></p>

<p>&hellip; and here&rsquo;s the readme file:</p>

<pre><code>README
-------------------

Run db.exe to see usage information.

All migration scripts are stored underneath the current working directory in: /migrate/

Connection strings to your database can be stored in the db.exe.config file.
Connection strings in this file can be referenced by name when executing commands on db.exe.

A [dbo].[schema_info] table will be created inside the database.
This table is used to store the current schema version and will be updated
whenever you run the 'migrate' command.
</code></pre>

<p>Of course everything the application does is wrapped in transactions so if at any
point during a migration an error occurs (i.e. some goof-ball screwed up the migration script)
it will roll back to the original version of the database.</p>

<p>Since your migration script is just T-SQL you can do anything from create tables and
add columns to doing data transformations. And assuming your scripts are well written,
you&rsquo;ll be able to transform your database to/from any version of the schema at anytime.</p>

<p>I&rsquo;m considering creating a Google Code project for this if there&rsquo;s enough interest. Thoughts?</p>


</article>

<div class="fin symbol">&#10687;</div>

</div>
</div>
	
	<div class="row">
<div class="twelve columns">

<article class="post">
    <header>
        <h1>
            
            <a href="/1/treesize-free">TreeSize Free</a>
            
        </h1>
        <p>
            <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" pubdate="pubdate">Mon, Jan 1, 0001</time>
            <span class="symbol">&#8226;</span>
            <a class="permalink" title="Permalink" href="/1/treesize-free">
                <span class="noprint symbol">&#8734;</span>
                <span class="printonly">http://joshua.poehls.me/1/treesize-free</span>
            </a>
        </p>
    </header>

    <p>Just bookmarking this great utility so I don&rsquo;t lose it later.</p>

<p><a href="http://www.jam-software.com/freeware/index.shtml">http://www.jam-software.com/freeware/index.shtml</a></p>

<blockquote>
<p>Every hard disk is too small if you just wait long enough.
TreeSize Free tells you where precious space has gone to.</p>

<p>TreeSize Free can be started from the context menu of a folder or drive
and shows you the size of this folder, including its subfolders.</p>

<p>You can expand this folder in Explorer-like style and you will see the size
of every subfolder. Scanning is done in a thread, so you can already see
results while TreeSize Free is working. The space, which is wasted by the
file system, can be displayed and the results can be printed in a report.</p>

<p>TreeSize Free is freeware for Windows 9x/2000/XP/Vista.</p>
</blockquote>


</article>

<div class="fin symbol">&#10687;</div>

</div>
</div>
	
	<div class="row">
<div class="twelve columns">

<article class="post">
    <header>
        <h1>
            
            <a href="/1/dotnetmigrations-0.5-now-with-a-bulkload-command">DotNetMigrations 0.5 now with a BulkLoad command!</a>
            
        </h1>
        <p>
            <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" pubdate="pubdate">Mon, Jan 1, 0001</time>
            <span class="symbol">&#8226;</span>
            <a class="permalink" title="Permalink" href="/1/dotnetmigrations-0.5-now-with-a-bulkload-command">
                <span class="noprint symbol">&#8734;</span>
                <span class="printonly">http://joshua.poehls.me/1/dotnetmigrations-0.5-now-with-a-bulkload-command</span>
            </a>
        </p>
    </header>

    <p>I just published <a href="http://www.codeplex.com/dotnetmigrations">DotNetMigrations release 0.5 on CodePlex</a>.</p>  <p>This release has several bug fixes, as well as a large amount of code refactoring and a new <b>bulkload</b> command.</p>  <p>I definitely recommend updating to this new version; there are <i>no breaking changes</i>.</p>  <h2>What is a ‘bulkload’ command?</h2>  <p>Well, the theory is simple. We need a way to easily INSERT a bunch of data into multiple tables in a database. Why not use SQL? Simple. Manually typing a hundred SQL INSERT statements is painful, very painful.</p>  <p>First, I’ll show you <i>how</i> this works and then I’ll tell you why I added this command (if you haven’t figured it out by then).</p>  <h2>The <i>How</i></h2>  <p><b></b></p>  <p>Create an XML file that describes the data you want to INSERT into your database. Example: say our database has 2 tables, “States” and “Cities”, here’s is what our XML file may look like for inserting some demo data.</p>  <p>[StatesAndCitiesSimple.xml]<a href="http://lh5.ggpht.com/jpoehls/SDRzFmSWMPI/AAAAAAAABuY/xCJy-9KWqaA/s1600-h/WindowClipping%20%282%29%5B7%5D.png">  
<img style="border: 0px none ;" alt="WindowClipping (2)" src="http://lh4.ggpht.com/jpoehls/SDRzGWSWMQI/AAAAAAAABug/FylC-LdsTrU/WindowClipping%20%282%29_thumb%5B5%5D.png?imgmax=800" border="0" height="196" width="390" /></a> </p>  <p>Now, if we run ...</p>  <blockquote>   <p><strong>db bulkload “SERVER=..." C:\StatesAndCitiesSimple.xml</strong></p> </blockquote>  <p><strong>... </strong>it will:</p>  <ol>   <li>insert 2 rows into our [States] table, and</li>    <li>insert 2 rows into our [Cities] table</li> </ol>  <p>Each attribute on the &lt;row /&gt; elements is expected to be the name of a column in the table, and the value that we want to insert into that column.</p>  <p>We could also do more advanced things like this:</p>  <p>[StatesAndCitiesAdvanced.xml]
<a href="http://lh4.ggpht.com/jpoehls/SDRzHWSWMRI/AAAAAAAABuo/hHx_bR-3re4/s1600-h/WindowClipping%20%283%29%5B3%5D.png"><img style="border: 0px none ;" alt="WindowClipping (3)" src="http://lh6.ggpht.com/jpoehls/SDRzH2SWMSI/AAAAAAAABuw/gu32VlaV5GU/WindowClipping%20%283%29_thumb%5B1%5D.png?imgmax=800" border="0" height="139" width="402" /></a> </p>  <p>Now, when we run...</p>  <blockquote>   <p><b>db bulkload “SERVER=..." C:\StatesAndCitiesAdvanced.xml</b></p> </blockquote>  <p><strong>... </strong>it will:</p>  <ol>   <li>confirm that the database’s schema is at version 5, if not then the <strong>bulkload </strong>will not be attempted</li>    <li>truncate the [States] table</li>    <li>SET IDENTITY_INSERT [States] ON</li>    <li>Insert 2 rows into the [States] table</li>    <li>SET IDENTITY_INSERT [States] OFF</li>    <li>DELETE FROM [Cities] WHERE Name = ‘Denver’</li>    <li>Insert 2 rows into [Cities] table</li> </ol>  <p>Of course, all of this is wrapped in a transaction, so if any piece fails then it will all be rolled back leaving your database unharmed.
</p>  <p>Now that you know a little of the <i>how</i>, let me tell you <i>why</i> I added this.</p>  <h2>The <i>Why</i></h2>  <p>It’s pretty common to create a SQL script that inserts test or demo data into your database. You may be doing this using regular SQL scripts right now, but those aren’t very friendly to edit. Not with lots of data. On the other hand, there are <i>lots</i> of XML editors out there that would make editing such a file much more enjoyable. Or better yet, you could generate the XML auto-magically somehow.</p>  <p>This is where <b>bulkload</b> shines. It gives you a simple, clean XML format that you can describe your data in, as well as the ability specify things like:</p>  <ul>   <li>Turning identity_insert on so that you can insert values into SQL Server identity fields </li>    <li>Truncating the table before inserting new rows </li>    <li>Use a filter expression to delete specific rows from the table before inserting new ones </li> </ul>  <p>This also ties into your migrations by providing a way to validate that the schema version is compatible with the data you want to push into it.</p>  <p>This release also adds return codes to <span style="font-weight: bold;">db.exe</span> so that we can tell whether the command was successful or whether an error occurred. This could be useful when scripting db.exe from a bat file.
</p>  <p>What are you still doing here? Go <a href="http://www.codeplex.com/dotnetmigrations">download the new release</a> and starting migrating!</p>

</article>

<div class="fin symbol">&#10687;</div>

</div>
</div>
	
	</section>

</div>

<nav class="pagination">



	<a href="/page/4/" aria-label="Recent Posts"><span aria-hidden="true">Recent Posts &raquo;</span></a>

</nav>

<footer>
<p>Subscribe to the <a href="/feed.xml">feed</a> to stay up-to-date.</p>
<p>Browse the <a href="/archives">archives</a> if you're bored.</p>
<p>&copy;&nbsp;2014-2015&nbsp;Joshua&nbsp;Poehls.</p>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55160531-2', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>